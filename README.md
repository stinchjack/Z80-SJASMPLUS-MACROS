# Z80 SJASMPlus Macros

## Disclaimer: Although the Z80 assembly code is hand-written, this README is generated by AI

A collection of Z80 assembly language macros designed for use with the [SJASMPlus](https://github.com/z00m128/sjasmplus) assembler.
These macros simplify common 8-bit arithmetic and memory operations to improve readability and reusability in Z80 assembly projects.

---

## Features

- Minimum/maximum comparisons on register A
- Memory arithmetic (add values from registers or other memory locations)
- Absolute value and negation routines
- Indexed operations with `ix` and `hl`
- Designed to be efficient and readable
- Uses modern macro syntax supported by SJASMPlus

---

## Installation

Clone or download this repository, and include the macro file in your Z80 assembly project:

## Example usage

  INCLUDE "include/macros/8-bit-maths.macros.asm"

  ld a, 20<br>
  MIN_UNSIGNED_A_VAL 42    ; Sets A to 42 if A < 42

  ld a, (myvar)<br>
  ABS8_A                   ; Makes A = |A| if A is signed

  ADD_ADDR_REG myvar, b    ; Adds B to the byte at myvar

  SUM_IX 0, 1, 2           ; (ix+0) = (ix+1) + (ix+2)

## Macro List

| Macro                 | Description                                                 | Z80 Syntax equivalent     | Notes
|-----------------------|-------------------------------------------------------------|---------------------------|-----------------|
| `MIN_UNSIGNED_A_VAL`  | Clamp A to a minimum value (A = min(A, val))                |                           | Corrupts AF     |
| `MAX_UNSIGNED_A_VAL`  | Clamp A to a maximum value (A = max(A, val))                |                           | Corrupts AF     |
| `ADD_ADDR_REG`        | Add a register (other than A) or value to memory address    | add (**), r               | Corrupts A      |
| `ADD_ADDR_ADDR`       | Add one memory location to another: (addr1) += (addr2)      | add (**), (**)            | Corrupts A      |
| `ADD_IX`              | Add values at IX+offsets: (ix+idx1) += (ix+idx2)            | add (ix+idx1), (ix+idx2)  | Corrupts A      |
| `SUM_IX`              | Compute (ix+idx1) = (ix+idx2) + (ix+idx3)                   | ld (ix+idx1), (ix+idx2)<br>  add (ix+idx2), (ix+idx3)  | Corrupts A      |
|                       |                                                             | add (ix+idx2), (ix+idx3)  |                 |
| `NEG8_IXPLUS`         | Negate value at (ix+n): (ix+n) = -(ix+n);                   |                           | Corrupts AF     |
| `ABS8_IXPLUS`         | Absolute value of (ix+n): (ix+n) = abs(ix+n)                |                           | Corrupts AF     |
| `ABS8_A`              | Absolute value of A (if signed)                             |                           | Corrupts Flags  |
| `ABS8_HLPTR`          | Absolute value of value at (HL): (hl) = abs((hl))           |                           | Corrupts AF     |
| `ABS8_DEPTR`          | Absolute value of value at (DE): (de) = abs((de));          |                           | Corrupts AF     |

## License
This project is licensed under the MIT License.
See the LICENSE file for details.
